// prettier-ignore
window.Slip=function(){function u(a,b){"string"===typeof a&&(a=document.querySelector(a));if(!a||!a.addEventListener)throw Error("Please specify DOM node to attach to");if(!this||this===window)return new u(a,b);this.options=b=b||{};this.options.keepSwipingPercent=b.keepSwipingPercent||0;this.options.minimumSwipeVelocity=b.minimumSwipeVelocity||1;this.options.minimumSwipeTime=b.minimumSwipeTime||110;this.options.ignoredElements=b.ignoredElements||[];this.options.accessibility=b.accessibility||m;this.options.accessibility.container=
b.accessibility.container||m.container;this.options.accessibility.container.role=void 0!==b.accessibility.container.role?b.accessibility.container.role:m.container.role;this.options.accessibility.container.tabIndex=void 0!==b.accessibility.container.tabIndex?b.accessibility.container.tabIndex:m.container.tabIndex;this.options.accessibility.container.focus=void 0!==b.accessibility.container.focus?b.accessibility.container.focus:m.container.focus;this.options.accessibility.items=b.accessibility.items||
m.items;this.options.accessibility.items.role=void 0!==b.accessibility.items.role?b.accessibility.items.role:m.items.role;this.options.accessibility.items.tabIndex=void 0!==b.accessibility.items.tabIndex?b.accessibility.items.tabIndex:m.items.tabIndex;this.options.accessibility.items.role=void 0!==b.accessibility.items.focus?b.accessibility.items.focus:m.items.focus;if(!Array.isArray(this.options.ignoredElements))throw Error("ignoredElements must be an Array");this.cancel=this.setState.bind(this,
this.states.idle);this.onTouchStart=this.onTouchStart.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onSelection=this.onSelection.bind(this);this.onContainerFocus=this.onContainerFocus.bind(this);this.setState(this.states.idle);this.attach(a)}function y(a){var b=a.style[g];
return b?{value:b,original:b}:window.getComputedStyle&&(a=window.getComputedStyle(a).getPropertyValue(v))&&"none"!==a?{value:a,original:""}:{value:"",original:""}}function B(a,b){for(var c=0,e=0,d=0;d<b.length;d++)1===b[d].nodeType&&(e++,b[d]===a.node&&(c=e-1));return c}var m={container:{role:"listbox",tabIndex:0,focus:!1},items:{role:"option",tabIndex:-1,focus:!1}},z=/Chrome\/[3-5]/.test(navigator.userAgent),q=document.createElement("div").style,l="transition"in q?"transition":"webkitTransition",
g="transform"in q?"transform":"webkitTransform",v="webkitTransform"===g?"-webkit-transform":"transform",C="userSelect"in q?"userSelect":"webkitUserSelect";q[g]="translateZ(0)";var t=q[g]?"translateZ(0) ":"",F=q[g]?"translateZ(1px) ":"";q=null;var A=0,w=!1,D=function(){};u.prototype={container:null,options:{},state:null,target:null,usingTouch:!1,mouseHandlersAttached:!1,startPosition:null,latestPosition:null,previousPosition:null,canPreventScrolling:!1,states:{idle:function(){this.removeMouseHandlers();
this.target&&(this.target.node.style.willChange="",this.target=null);this.usingTouch=!1;return{allowTextSelection:!0}},undecided:function(){this.target.height=this.target.node.offsetHeight;this.target.node.style.willChange=v;this.target.node.style[l]="";if(this.dispatch(this.target.originalTarget,"beforewait"))var a=setTimeout(function(){var b=this.getAbsoluteMovement();this.canPreventScrolling&&15>b.x&&25>b.y&&this.dispatch(this.target.originalTarget,"beforereorder")&&this.setState(this.states.reorder)}.bind(this),
300);else this.dispatch(this.target.originalTarget,"beforereorder")&&this.setState(this.states.reorder);return{leaveState:function(){clearTimeout(a)},onMove:function(){var b=this.getAbsoluteMovement();if(20<b.x&&b.y<Math.max(100,this.target.height)){if(this.dispatch(this.target.originalTarget,"beforeswipe",{directionX:b.directionX,directionY:b.directionY}))return this.setState(this.states.swipe),!1;this.setState(this.states.idle)}20<b.y&&this.setState(this.states.idle);if(b.x>1.2*b.y)return!1},onLeave:function(){this.setState(this.states.idle)},
onEnd:function(){var b=this.dispatch(this.target.originalTarget,"tap");this.setState(this.states.idle);return b}}},swipe:function(){function a(){c.classList.remove("slip-swiping-container")}var b=!1,c=this.container,e=B(this.target,this.container.childNodes);c.classList.add("slip-swiping-container");this.target.height=this.target.node.offsetHeight;return{leaveState:function(){b?this.animateSwipe(function(d){d.node.style[g]=d.baseTransform.original;d.node.style[l]="";if(this.dispatch(d.node,"afterswipe"))return a(),
!0;this.animateToZero(void 0,d)}.bind(this)):this.animateToZero(a)},onMove:function(){var d=this.getTotalMovement();if(Math.abs(d.y)<this.target.height+20)return this.dispatch(this.target.node,"animateswipe",{x:d.x,originalIndex:e})&&(this.target.node.style[g]="translate("+d.x+"px,0) "+t+this.target.baseTransform.value),!1;this.dispatch(this.target.node,"cancelswipe");this.setState(this.states.idle)},onLeave:function(){this.state.onEnd.call(this)},onEnd:function(){var d=this.getAbsoluteMovement(),
h=100*Math.abs((this.startPosition.x-this.previousPosition.x)/this.container.clientWidth);(h=d.x/d.time>this.options.minimumSwipeVelocity&&d.time>this.options.minimumSwipeTime||this.options.keepSwipingPercent&&h>this.options.keepSwipingPercent)?this.dispatch(this.target.node,"swipe",{direction:d.directionX,originalIndex:e})&&(b=!0):this.dispatch(this.target.node,"cancelswipe");this.setState(this.states.idle);return!h}}},reorder:function(){function a(){this.updateScrolling();h&&(clearTimeout(h),h=
null);var f=this.getTotalMovement();this.target.node.style[g]="translate(0,"+f.y+"px) "+F+this.target.baseTransform.value;var k=this.target.height;n.forEach(function(r){var x=0;0>r.pos&&0>f.y&&r.pos>f.y?x=k:0<r.pos&&0<f.y&&r.pos<f.y&&(x=-k);r.node.style[g]=x?"translate(0,"+x+"px) "+t+r.baseTransform.value:r.baseTransform.original});return!1}this.target.node.focus&&this.options.accessibility.items.focus&&this.target.node.focus();this.target.height=this.target.node.offsetHeight;if(this.options.ignoredElements.length){var b=
this.container,c=b.tagName.toLowerCase();b.getAttribute("id")?c="#"+b.getAttribute("id"):b.classList.length&&(c+="."+b.getAttribute("class").replace(" ","."));c+=" > ";this.options.ignoredElements.forEach(function(f){c+=":not("+f+")"});try{var e=b.parentNode.querySelectorAll(c)}catch(f){if(f instanceof DOMException&&"SyntaxError"===f.name)throw Error("ignoredElements you specified contain invalid query");throw f;}}else e=this.container.childNodes;var d=B(this.target,e),h;b=this.target.node.offsetTop+
this.target.height/2;for(var n=[],p=0;p<e.length;p++)if(1==e[p].nodeType&&e[p]!==this.target.node){var E=e[p].offsetTop;e[p].style[l]=v+" 0.2s ease-in-out";n.push({node:e[p],baseTransform:y(e[p]),pos:E+(E<b?e[p].offsetHeight:0)-b})}this.target.node.classList.add("slip-reordering");this.target.node.style.zIndex="99999";this.target.node.style[C]="none";z&&(this.container.style.webkitTransformStyle="preserve-3d");a.call(this);return{leaveState:function(){h&&clearTimeout(h);z&&(this.container.style.webkitTransformStyle=
"");this.container.focus&&this.options.accessibility.container.focus&&this.container.focus();this.target.node.classList.remove("slip-reordering");this.target.node.style[C]="";this.animateToZero(function(f){f.node.style.zIndex=""});n.forEach(function(f){f.node.style[g]=f.baseTransform.original;f.node.style[l]=""})},onMove:a,onLeave:function(){h&&clearTimeout(h);h=setTimeout(function(){h=null;this.cancel()}.bind(this),700)},onEnd:function(){var f=this.getTotalMovement(),k;if(0>f.y){for(k=0;k<n.length&&
!(n[k].pos>f.y);k++);f=k}else{for(k=n.length-1;0<=k&&!(n[k].pos<f.y);k--);f=k+1}this.dispatch(this.target.node,"reorder",{spliceIndex:f,originalIndex:d,insertBefore:n[f]?n[f].node:null});this.setState(this.states.idle);return!1}}}},attach:function(a){A++;this.container&&this.detach();!w&&z&&(w=!0,document.body.addEventListener("touchstart",D,!1));this.container=a;!1!==this.options.accessibility.container.tabIndex&&(this.container.tabIndex=this.options.accessibility.container.tabIndex);this.options.accessibility.container.role&&
this.container.setAttribute("role",this.options.accessibility.container.role);this.setChildNodesRoles();this.container.addEventListener("focus",this.onContainerFocus,!1);this.otherNodes=[];document.addEventListener("selectionchange",this.onSelection,!1);this.container.addEventListener("touchcancel",this.cancel,!1);this.container.addEventListener("touchstart",this.onTouchStart,!1);this.container.addEventListener("touchmove",this.onTouchMove,!1);this.container.addEventListener("touchend",this.onTouchEnd,
!1);this.container.addEventListener("mousedown",this.onMouseDown,!1)},detach:function(){this.cancel();this.container.removeEventListener("mousedown",this.onMouseDown,!1);this.container.removeEventListener("touchend",this.onTouchEnd,!1);this.container.removeEventListener("touchmove",this.onTouchMove,!1);this.container.removeEventListener("touchstart",this.onTouchStart,!1);this.container.removeEventListener("touchcancel",this.cancel,!1);document.removeEventListener("selectionchange",this.onSelection,
!1);!1!==this.options.accessibility.container.tabIndex&&this.container.removeAttribute("tabIndex");this.options.accessibility.container.role&&this.container.removeAttribute("role");this.unSetChildNodesRoles();A--;!A&&w&&(w=!1,document.body.removeEventListener("touchstart",D,!1))},setState:function(a){if(this.state){if(this.state.ctor===a)return;this.state.leaveState&&this.state.leaveState.call(this)}var b=this.state,c=a.call(this);this.state===b&&(c.ctor=a,this.state=c)},findTargetNode:function(a){for(;a&&
a.parentNode!==this.container;)a=a.parentNode;return a},onContainerFocus:function(a){a.stopPropagation();this.setChildNodesRoles()},setChildNodesRoles:function(){for(var a=this.container.childNodes,b=0;b<a.length;b++)1==a[b].nodeType&&(this.options.accessibility.items.role&&a[b].setAttribute("role",this.options.accessibility.items.role),!1!==this.options.accessibility.items.tabIndex&&(a[b].tabIndex=this.options.accessibility.items.tabIndex))},unSetChildNodesRoles:function(){for(var a=this.container.childNodes,
b=0;b<a.length;b++)1==a[b].nodeType&&(this.options.accessibility.items.role&&a[b].removeAttribute("role"),!1!==this.options.accessibility.items.tabIndex&&a[b].removeAttribute("tabIndex"))},onSelection:function(a){a.stopPropagation();var b=a.target===document||this.findTargetNode(a),c=/(iPhone|iPad|iPod)/i.test(navigator.userAgent)&&!/(Android|Windows)/i.test(navigator.userAgent);b&&(c?this.setState(this.states.idle):this.state.allowTextSelection||a.preventDefault())},addMouseHandlers:function(){this.mouseHandlersAttached||
(this.mouseHandlersAttached=!0,document.documentElement.addEventListener("mouseleave",this.onMouseLeave,!1),window.addEventListener("mousemove",this.onMouseMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),window.addEventListener("blur",this.cancel,!1))},removeMouseHandlers:function(){this.mouseHandlersAttached&&(this.mouseHandlersAttached=!1,document.documentElement.removeEventListener("mouseleave",this.onMouseLeave,!1),window.removeEventListener("mousemove",this.onMouseMove,!0),window.removeEventListener("mouseup",
this.onMouseUp,!0),window.removeEventListener("blur",this.cancel,!1))},onMouseLeave:function(a){a.stopPropagation();this.usingTouch||(a.target===document.documentElement||a.relatedTarget===document.documentElement)&&this.state.onLeave&&this.state.onLeave.call(this)},onMouseDown:function(a){a.stopPropagation();!this.usingTouch&&0==a.button&&this.setTarget(a)&&(this.addMouseHandlers(),this.canPreventScrolling=!0,this.startAtPosition({x:a.clientX,y:a.clientY,time:a.timeStamp}))},onTouchStart:function(a){a.stopPropagation();
this.canPreventScrolling=this.usingTouch=!0;1<a.touches.length?this.setState(this.states.idle):this.setTarget(a)&&this.startAtPosition({x:a.touches[0].clientX,y:a.touches[0].clientY,time:a.timeStamp})},setTarget:function(a){var b=this.findTargetNode(a.target);if(!b)return this.setState(this.states.idle),!1;var c=this.options.scrollContainer;if(!c){var e=document.scrollingElement||document.documentElement;for(c=b.parentNode;c&&c!=e&&!(c!=document.body&&c.scrollHeight>c.clientHeight&&"visible"!=window.getComputedStyle(c)["overflow-y"]);)c=
c.parentNode;c=c||e}this.target={originalTarget:a.target,node:b,scrollContainer:c,origScrollTop:c.scrollTop,origScrollHeight:c.scrollHeight,baseTransform:y(b)};return!0},startAtPosition:function(a){this.startPosition=this.previousPosition=this.latestPosition=a;this.setState(this.states.undecided)},updatePosition:function(a,b){null!=this.target&&(this.latestPosition=b,this.state.onMove&&!1===this.state.onMove.call(this)&&a.preventDefault(),100<this.latestPosition.time-this.previousPosition.time&&(this.previousPosition=
this.latestPosition))},onMouseMove:function(a){a.stopPropagation();this.updatePosition(a,{x:a.clientX,y:a.clientY,time:a.timeStamp})},onTouchMove:function(a){a.stopPropagation();this.updatePosition(a,{x:a.touches[0].clientX,y:a.touches[0].clientY,time:a.timeStamp});this.canPreventScrolling=!1},onMouseUp:function(a){a.stopPropagation();this.usingTouch||0!==a.button||this.state.onEnd&&!1===this.state.onEnd.call(this)&&a.preventDefault()},onTouchEnd:function(a){a.stopPropagation();1<a.touches.length?
this.cancel():this.state.onEnd&&!1===this.state.onEnd.call(this)&&a.preventDefault()},getTotalMovement:function(){return{x:this.latestPosition.x-this.startPosition.x,y:this.latestPosition.y-this.startPosition.y+(this.target.scrollContainer.scrollTop-this.target.origScrollTop),time:this.latestPosition.time-this.startPosition.time}},getAbsoluteMovement:function(){var a=this.getTotalMovement();return{x:Math.abs(a.x),y:Math.abs(a.y),time:a.time,directionX:0>a.x?"left":"right",directionY:0>a.y?"up":"down"}},
updateScrolling:function(){var a=0,b=this.target.scrollContainer,c=b.getBoundingClientRect(),e=this.target.node.getBoundingClientRect(),d=Math.min(c.bottom,window.innerHeight)-e.bottom;c=e.top-Math.max(c.top,0);e=this.target.origScrollHeight-Math.min(b.clientHeight,window.innerHeight);40>d?a=Math.min(40,40-d):40>c&&(a=Math.max(-40,c-40));b.scrollTop=Math.max(0,Math.min(e,b.scrollTop+a))},dispatch:function(a,b,c){var e=document.createEvent("CustomEvent");e&&e.initCustomEvent?e.initCustomEvent("slip:"+
b,!0,!0,c):(e=document.createEvent("Event"),e.initEvent("slip:"+b,!0,!0),e.detail=c);return a.dispatchEvent(e)},getSiblings:function(a){var b=[];for(a=a.node.nextSibling;a;)1==a.nodeType&&b.push({node:a,baseTransform:y(a)}),a=a.nextSibling;return b},animateToZero:function(a,b){b=b||this.target;b.node.style[l]=v+" 0.1s ease-out";b.node.style[g]="translate(0,0) "+t+b.baseTransform.value;setTimeout(function(){b.node.style[l]="";b.node.style[g]=b.baseTransform.original;a&&a.call(this,b)}.bind(this),101)},
animateSwipe:function(a){var b=this.target,c=this.getSiblings(b),e="translate(0,"+this.target.height+"px) "+t+" ";b.node.style[l]="all 0.1s linear";b.node.style[g]=" translate("+(0<this.getTotalMovement().x?"":"-")+"100%,0) "+t+b.baseTransform.value;setTimeout(function(){a.call(this,b)&&(c.forEach(function(d){d.node.style[l]="";d.node.style[g]=e+d.baseTransform.value}),setTimeout(function(){c.forEach(function(d){d.node.style[l]=v+" 0.1s ease-in-out";d.node.style[g]="translate(0,0) "+t+d.baseTransform.value});
setTimeout(function(){c.forEach(function(d){d.node.style[l]="";d.node.style[g]=d.baseTransform.original})},101)},1))}.bind(this),101)}};"function"===typeof define&&define.amd&&define(function(){return u});"object"===typeof module&&module.exports&&(module.exports=u);return u}();
